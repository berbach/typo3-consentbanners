(function e(n,t){if(typeof exports==="object"&&typeof module==="object")module.exports=t();else if(typeof define==="function"&&define.amd)define([],t);else if(typeof exports==="object")exports["BbModule"]=t();else n["BbModule"]=n["BbModule"]||{},n["BbModule"]["ConsentBanner"]=t()})(self,(function(){return function(){var e={"./Resources/Public/Assets/Src/JavaScript/Lib/cookie.js":function(e){var n={};n.exdays=30;n.check=function(e){var n=this.get(e);return n!==""};n.set=function(e,n,t){t=t?t:this.exdays;var o=new Date;o.setTime(o.getTime()+t*24*60*60*1e3);var r="expires="+o.toGMTString();document.cookie=e+"="+n+";"+r+";path=/"};n.get=function(e){var n=e+"=",t=decodeURIComponent(document.cookie),o=t.split(";");for(var r=0;r<o.length;r++){var i=o[r];while(i.charAt(0)===" "){i=i.substring(1)}if(i.indexOf(n)===0){return i.substring(n.length,i.length)}}return"{}"};e.exports=n}};var n={};function t(o){var r=n[o];if(r!==undefined){return r.exports}var i=n[o]={exports:{}};e[o](i,i.exports,t);return i.exports}!function(){t.d=function(e,n){for(var o in n){if(t.o(n,o)&&!t.o(e,o)){Object.defineProperty(e,o,{enumerable:true,get:n[o]})}}}}();!function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}();!function(){t.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}}();var o={};!function(){"use strict";t.r(o);t.d(o,{init:function(){return m}});function e(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function n(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach((function(e){r(n,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}))}return n}function r(e,n,t){n=i(n);if(n in e){Object.defineProperty(e,n,{value:t,enumerable:true,configurable:true,writable:true})}else{e[n]=t}return e}function i(e){var n=a(e,"string");return c(n)==="symbol"?n:String(n)}function a(e,n){if(c(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==undefined){var o=t.call(e,n||"default");if(c(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function c(e){"@babel/helpers - typeof";return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var s=t("./Resources/Public/Assets/Src/JavaScript/Lib/cookie.js");var l="bb-consentbanner-";var u="bb-consentbanner-";if(!("from"in Array))Array.from=function(e){var n=[];for(var t=0;t<e.length;t++){n.push(e[t])}return n};if(!("includes"in Array.prototype))Array.prototype.includes=function(e,n){return this.indexOf(e,n)!==-1};if(!("fromEntries"in Object))Object.fromEntries=function(e){var n={};Array.from(e).forEach((function(e){n[e[0]]=e[1]}));return n};bbConsentBanner=bbConsentBanner||null;var d="";function b(e){var n=this;var t=function o(e,n,t){return c(e)===n&&e!==t};this.bbConsentBanner=t(bbConsentBanner,"object","")?bbConsentBanner:null;this.cookieName=t(this.bbConsentBanner.cName,"string","")?bbConsentBanner.cName:"BbConsentPreference";d=this.cookieName;this.confirmDuration=t(this.bbConsentBanner.confirmDuration,"number",0)?this.bbConsentBanner.confirmDuration:20;this.categories=c(bbConsentBanner.categories)==="object"&&bbConsentBanner.categories.length!==0?bbConsentBanner.categories:null;this.modules=c(bbConsentBanner.modules)==="object"&&bbConsentBanner.modules.length!==0?bbConsentBanner.modules:null;this.form=null;this.acceptButton=null;this.saveButton=null;this.moreButton=null;this.confirmButton=null;this.rejectButton=null;if(e.classList.contains("bb-widget")){this.widget=e;e=v("div",{className:["bb-consentbanner","".concat(this.bbConsentBanner.layoutType)].join(" ")})}else this.widget=v("div",{className:["bb-widget",l+"button"].join(" ")});this.preferences=JSON.parse(s.get(this.cookieName));this.isBottomLayout=e.classList.contains("bb-cb-bottom");this.init=function(){if(n.bbConsentBanner===null||n.categories===null||n.modules===null){var t="";if(n.bbConsentBanner===null)t+="Consent banner, ";if(n.categories===null)t+="Categories ";if(n.modules===null)t+="and Modules ";t+="data empty, Consent Banner not initialised!";console.warn(t);return false}n.widget.addEventListener("click",(function(){if(n.form===null)n.generateBanner();else n.form.parentElement.classList.add("visible");n.moreButton.click();Object.keys(n.preferences).forEach((function(e){var t=n.form.querySelector(".".concat(l,'module input[name="').concat(e,'"]'));if(n.preferences[e]!==t.checked)t.click()}))}));if(Object.keys(n.preferences).length===0)n.generateBanner();else e.insertAdjacentElement("afterend",n.widget)};this.attachBannerEventListeners=function(){var t,o,r,i,a,c,d;(t=n.form)===null||t===void 0?void 0:t.addEventListener("submit",(function(e){e.preventDefault()}));(o=n.saveButton)===null||o===void 0?void 0:o.addEventListener("click",(function(){return m(b())}));(r=n.confirmButton)===null||r===void 0?void 0:r.addEventListener("click",(function(){return m(b())}));(i=n.acceptButton)===null||i===void 0?void 0:i.addEventListener("click",(function(){return m(f(true))}));(a=n.rejectButton)===null||a===void 0?void 0:a.addEventListener("click",(function(){return m(f(false))}));(c=n.moreButton)===null||c===void 0?void 0:c.addEventListener("click",(function(){var t;n.moreButton.remove();(t=n.confirmButton)===null||t===void 0?void 0:t.remove();n.saveButton.classList.remove("hidden");e.classList.remove("bb-cb-bottom");e.classList.add("bb-cb-overlay");var o=function r(e){e===null||e===void 0?void 0:e.classList.remove("bb-btn--typeP");e===null||e===void 0?void 0:e.classList.add("bb-btn--typeS")};o(n.acceptButton);o(n.rejectButton);n.form.querySelector(".".concat(l,"content")).classList.remove("bb-type-dynamic");n.form.querySelector(".".concat(l,"content")).classList.add("bb-type-scroll");Array.from(n.form.querySelectorAll(".".concat(l,"category-modules.hidden"))).forEach((function(e){e.classList.remove("hidden")}));n.form.querySelector(".".concat(l,"categories")).classList.remove("hidden");n.form.querySelector(".".concat(l,"buttons")).classList.remove("not-categories");n.form.querySelector(".".concat(l,"buttons")).classList.add("is-categories")}));(d=n.form.querySelector(".".concat(l,"close")))===null||d===void 0?void 0:d.addEventListener("click",(function(){if(Object.keys(n.preferences).length===0)m(f(false));else n.form.parentElement.classList.remove("visible")}));var b=function v(){return Object.fromEntries(Array.from(n.form.querySelectorAll(".".concat(l,"module input:not(:disabled)"))).map((function(e){return[e.name,e.checked]})))};var f=function p(e){var n=b();for(var t=0,o=Object.keys(n);t<o.length;t++){var r=o[t];n[r]=e}m(n);return n};var m=function y(e){s.set(n.cookieName,JSON.stringify(e)+";secure;samesite=strict",n.confirmDuration);window.location.reload()};Array.from(n.form.querySelectorAll(".".concat(l,"module input:not(:disabled)"))).forEach((function(e){e.addEventListener(document.documentMode===11?"change":"input",(function(){var n=e.dataset.category;var t=Array.from(document.querySelectorAll(".".concat(l,"module input"))).filter((function(e){return e.dataset.category===n})).map((function(e){return e.checked}));var o=document.querySelector(".".concat(l,'category input[name="').concat(u+n,'"]'));o.indeterminate=false;if(!t.includes(true))o.checked=false;else if(!t.includes(false))o.checked=true;else o.indeterminate=true}))}));Array.from(n.form.querySelectorAll(".".concat(l,"category input[name^=").concat(u,"]:not(:disabled)"))).forEach((function(e){e.addEventListener(document.documentMode===11?"change":"input",(function(){var n=e.name.replace(u,"");Array.from(document.querySelectorAll(".".concat(l,"module input"))).filter((function(e){return e.dataset.category===n})).forEach((function(n){return n.checked=e.checked}))}))}))};this.generateBanner=function(){n.widget.insertAdjacentElement("beforebegin",e);var t=v;n.form=t("form",{className:[l+"body"].join(" ")});var o=t("div",{className:l+"header"});t("button",{className:l+"close"},o);if(n.bbConsentBanner.title!==""){t("h3",{className:l+"-heading",innerText:n.bbConsentBanner.title},o)}n.form.appendChild(o);var r=t("div",{className:[l+"content",!n.isBottomLayout?"bb-type-scroll":"bb-type-dynamic",n.bbConsentBanner.showCategories?"is-categories":undefined].join(" ")});if(n.bbConsentBanner.description!==""){t("p",{className:l+"-text",innerHTML:n.bbConsentBanner.description},r)}if(c(n.bbConsentBanner.categories)==="object"&&n.bbConsentBanner.categories.length>0){var i;var a=t("div",{className:[l+"categories",n.bbConsentBanner.showCategories?undefined:"hidden"].join(" ")});(i=n.bbConsentBanner.categories)===null||i===void 0?void 0:i.forEach((function(e){var o;var r=t("div",{className:[l+"category-modules","hidden"].join(" ")});var i=(o=n.bbConsentBanner.modules)===null||o===void 0?void 0:o.filter((function(n){return n.category.uid===e.uid}));i===null||i===void 0?void 0:i.forEach((function(n){r.appendChild(p(false,n.name,n.uid,n.description,{"data-category":n.category.uid,checked:!!e.lockedAndActive,disabled:!!e.lockedAndActive}))}));a.appendChild(p(true,e.name,u+e.uid,e.description,{checked:!!e.lockedAndActive,disabled:!!e.lockedAndActive},c(i)==="object"&&r.children.length>0?r:null))}));r.appendChild(a)}n.form.appendChild(r);var s=t("div",{className:l+"footer"});var d=t("div",{className:[l+"buttons",n.bbConsentBanner.showCategories?"is-categories":"not-categories"].join(" ")});var b=n.bbConsentBanner.buttonsDisplayNames;n.acceptButton=t("button",{className:["bb-button","bb-btn--typeP"].join(" "),type:"submit",title:b.acceptAll,innerText:b.acceptAll},d);n.saveButton=t("button",{className:["bb-button","bb-btn--typeP","hidden"].join(" "),type:"submit",title:b.saveAndClose,innerText:b.saveAndClose},d);if(!n.isBottomLayout)n.moreButton=t("button",{className:["bb-button","bb-btn--typeS"].join(" "),type:"button",title:b.advancedSettings,innerText:b.advancedSettings},d);if(n.isBottomLayout&&n.bbConsentBanner.showCategories)n.confirmButton=t("button",{className:["bb-button","bb-btn--typeS"].join(" "),type:"submit",title:b.confirmSelection,innerText:b.confirmSelection},d);if(!n.bbConsentBanner.showCategories)n.rejectButton=t("button",{className:["bb-button","bb-btn--typeP"].join(" "),type:"button",title:b.reject,innerText:b.reject},d);s.appendChild(d);var f=t("div",{className:l+"links"});if(n.isBottomLayout){n.moreButton=t("a",{className:[l+"-link"].join(" "),href:"javascript:void(0);",title:b.advancedSettings,innerText:b.advancedSettings},f)}t("a",{className:l+"-link",title:n.bbConsentBanner.privacyPage.label,innerText:n.bbConsentBanner.privacyPage.label,href:n.bbConsentBanner.privacyPage.uri,target:n.bbConsentBanner.privacyPage.target},f);s.appendChild(f);n.form.appendChild(s);n.attachBannerEventListeners();document.querySelector(".bb-consentbanner").appendChild(n.form);document.querySelector(".bb-consentbanner").classList.add("visible")}}var f=false;function m(e){var n=this;var t=new b(e);t.init();if(f)return;f=true;document.querySelectorAll("[data-cookiebanner-module]").forEach((function(e){e.querySelector("input").addEventListener("click",(function(){document.querySelectorAll('[data-cookiebanner-module="'.concat(e.dataset.cookiebannerModule,'"] input')).forEach((function(e){return e.checked=true}));var t=JSON.parse(s.get(d));t[e.dataset.cookiebannerModule]=true;s.set(d,JSON.stringify(t)+";secure;samesite=strict",n.confirmDuration);setTimeout((function(){return window.location.reload()}),100)}))}))}function v(e,n,t){var o=document.createElement(e);for(var r in n){if(!n.hasOwnProperty(r))continue;if(r==="innerText")o.innerText=n[r];else if(r==="innerHTML")o.innerHTML=n[r];else{if(r in o)o[r]=n[r];else o.setAttribute(r==="className"?"class":r,n[r])}}if(t)t.appendChild(o);return o}function p(e,t,o,r,i,a){var c,s,u,d,b,f;e=(c=e)!==null&&c!==void 0?c:false;t=(s=t)!==null&&s!==void 0?s:"";o=(u=o)!==null&&u!==void 0?u:"";r=(d=r)!==null&&d!==void 0?d:"";i=(b=i)!==null&&b!==void 0?b:{};a=(f=a)!==null&&f!==void 0?f:false;var m=v;var p=m("div",{className:[l+(e?"category":"module")].join(" ")});var y=m("label",{className:"bb-control-checkbox","aria-label":t});y.appendChild(m("span",{className:["bb-control-label",e?"bb-label-category":"bb-label-module"].join(" "),innerText:t}));y.appendChild(m("input",n(n({},i),{},{type:"checkbox",name:o})));y.appendChild(m("span",{className:"bb-toggle"}));p.appendChild(y);if(r)p.appendChild(m("p",{className:l+"description",innerText:r}));if(a)p.appendChild(a);return p}}();return o}()}));