(function e(n,t){if(typeof exports==="object"&&typeof module==="object")module.exports=t();else if(typeof define==="function"&&define.amd)define([],t);else if(typeof exports==="object")exports["BbModule"]=t();else n["BbModule"]=n["BbModule"]||{},n["BbModule"]["ConsentBanner"]=t()})(self,(function(){return function(){var e={"./Resources/Public/Assets/Src/JavaScript/Lib/cookie.js":function(e){var n={};n.exdays=30;n.check=function(e){var n=this.get(e);return n!==""};n.set=function(e,n,t){t=t?t:this.exdays;var o=new Date;o.setTime(o.getTime()+t*24*60*60*1e3);var r="expires="+o.toGMTString();document.cookie=e+"="+n+";"+r+";path=/"};n.get=function(e){var n=e+"=",t=decodeURIComponent(document.cookie),o=t.split(";");for(var r=0;r<o.length;r++){var i=o[r];while(i.charAt(0)===" "){i=i.substring(1)}if(i.indexOf(n)===0){return i.substring(n.length,i.length)}}return"{}"};e.exports=n}};var n={};function t(o){var r=n[o];if(r!==undefined){return r.exports}var i=n[o]={exports:{}};e[o](i,i.exports,t);return i.exports}!function(){t.d=function(e,n){for(var o in n){if(t.o(n,o)&&!t.o(e,o)){Object.defineProperty(e,o,{enumerable:true,get:n[o]})}}}}();!function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}();!function(){t.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}}();var o={};!function(){"use strict";t.r(o);t.d(o,{init:function(){return b}});function e(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);if(n){o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))}t.push.apply(t,o)}return t}function n(n){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};if(t%2){e(Object(o),true).forEach((function(e){r(n,e,o[e])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(n,Object.getOwnPropertyDescriptors(o))}else{e(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}))}}return n}function r(e,n,t){if(n in e){Object.defineProperty(e,n,{value:t,enumerable:true,configurable:true,writable:true})}else{e[n]=t}return e}function i(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(n){return typeof n}}else{i=function e(n){return n&&typeof Symbol==="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n}}return i(e)}var a=t("./Resources/Public/Assets/Src/JavaScript/Lib/cookie.js");var c="bb-consentbanner-";var s="bb-consentbanner-";if(!("from"in Array))Array.from=function(e){var n=[];for(var t=0;t<e.length;t++){n.push(e[t])}return n};if(!("includes"in Array.prototype))Array.prototype.includes=function(e,n){return this.indexOf(e,n)!==-1};if(!("fromEntries"in Object))Object.fromEntries=function(e){var n={};Array.from(e).forEach((function(e){n[e[0]]=e[1]}));return n};bbConsentBanner=bbConsentBanner||null;var l="";function u(e){var n=this;var t=function o(e,n,t){return i(e)===n&&e!==t};this.bbConsentBanner=t(bbConsentBanner,"object","")?bbConsentBanner:null;this.cookieName=t(this.bbConsentBanner.cName,"string","")?bbConsentBanner.cName:"BbConsentPreference";l=this.cookieName;this.confirmDuration=t(this.bbConsentBanner.confirmDuration,"number",0)?this.bbConsentBanner.confirmDuration:20;this.categories=i(bbConsentBanner.categories)==="object"&&bbConsentBanner.categories.length!==0?bbConsentBanner.categories:null;this.modules=i(bbConsentBanner.modules)==="object"&&bbConsentBanner.modules.length!==0?bbConsentBanner.modules:null;this.form=null;this.acceptButton=null;this.saveButton=null;this.moreButton=null;this.confirmButton=null;this.rejectButton=null;if(e.classList.contains("bb-widget")){this.widget=e;e=f("div",{className:["bb-consentbanner","".concat(this.bbConsentBanner.layoutType)].join(" ")})}else this.widget=f("div",{className:["bb-widget",c+"button"].join(" ")});this.preferences=JSON.parse(a.get(this.cookieName));this.isBottomLayout=e.classList.contains("bb-cb-bottom");this.init=function(){if(n.bbConsentBanner===null||n.categories===null||n.modules===null){var t="";if(n.bbConsentBanner===null)t+="Consent banner, ";if(n.categories===null)t+="Categories ";if(n.modules===null)t+="and Modules ";t+="data empty, Consent Banner not initialised!";console.warn(t);return false}n.widget.addEventListener("click",(function(){if(n.form===null)n.generateBanner();else n.form.parentElement.classList.add("visible");n.moreButton.click();Object.keys(n.preferences).forEach((function(e){var t=n.form.querySelector(".".concat(c,'module input[name="').concat(e,'"]'));if(n.preferences[e]!==t.checked)t.click()}))}));if(Object.keys(n.preferences).length===0)n.generateBanner();else e.insertAdjacentElement("afterend",n.widget)};this.attachBannerEventListeners=function(){var t,o,r,i,l,u,d;(t=n.form)===null||t===void 0?void 0:t.addEventListener("submit",(function(e){e.preventDefault()}));(o=n.saveButton)===null||o===void 0?void 0:o.addEventListener("click",(function(){return m(b())}));(r=n.confirmButton)===null||r===void 0?void 0:r.addEventListener("click",(function(){return m(b())}));(i=n.acceptButton)===null||i===void 0?void 0:i.addEventListener("click",(function(){return m(f(true))}));(l=n.rejectButton)===null||l===void 0?void 0:l.addEventListener("click",(function(){return m(f(false))}));(u=n.moreButton)===null||u===void 0?void 0:u.addEventListener("click",(function(){var t;n.moreButton.remove();(t=n.confirmButton)===null||t===void 0?void 0:t.remove();n.saveButton.classList.remove("hidden");e.classList.remove("bb-cb-bottom");e.classList.add("bb-cb-overlay");var o=function r(e){e===null||e===void 0?void 0:e.classList.remove("bb-btn--typeP");e===null||e===void 0?void 0:e.classList.add("bb-btn--typeS")};o(n.acceptButton);o(n.rejectButton);n.form.querySelector(".".concat(c,"content")).classList.remove("bb-type-dynamic");n.form.querySelector(".".concat(c,"content")).classList.add("bb-type-scroll");Array.from(n.form.querySelectorAll(".".concat(c,"category-modules.hidden"))).forEach((function(e){e.classList.remove("hidden")}));n.form.querySelector(".".concat(c,"categories")).classList.remove("hidden");n.form.querySelector(".".concat(c,"buttons")).classList.remove("not-categories");n.form.querySelector(".".concat(c,"buttons")).classList.add("is-categories")}));(d=n.form.querySelector(".".concat(c,"close")))===null||d===void 0?void 0:d.addEventListener("click",(function(){if(Object.keys(n.preferences).length===0)m(f(false));else n.form.parentElement.classList.remove("visible")}));var b=function v(){return Object.fromEntries(Array.from(n.form.querySelectorAll(".".concat(c,"module input:not(:disabled)"))).map((function(e){return[e.name,e.checked]})))};var f=function p(e){var n=b();for(var t=0,o=Object.keys(n);t<o.length;t++){var r=o[t];n[r]=e}m(n);return n};var m=function y(e){a.set(n.cookieName,JSON.stringify(e)+";secure;samesite=strict",n.confirmDuration);window.location.reload()};Array.from(n.form.querySelectorAll(".".concat(c,"module input:not(:disabled)"))).forEach((function(e){e.addEventListener(document.documentMode===11?"change":"input",(function(){var n=e.dataset.category;var t=Array.from(document.querySelectorAll(".".concat(c,"module input"))).filter((function(e){return e.dataset.category===n})).map((function(e){return e.checked}));var o=document.querySelector(".".concat(c,'category input[name="').concat(s+n,'"]'));o.indeterminate=false;if(!t.includes(true))o.checked=false;else if(!t.includes(false))o.checked=true;else o.indeterminate=true}))}));Array.from(n.form.querySelectorAll(".".concat(c,"category input[name^=").concat(s,"]:not(:disabled)"))).forEach((function(e){e.addEventListener(document.documentMode===11?"change":"input",(function(){var n=e.name.replace(s,"");Array.from(document.querySelectorAll(".".concat(c,"module input"))).filter((function(e){return e.dataset.category===n})).forEach((function(n){return n.checked=e.checked}))}))}))};this.generateBanner=function(){n.widget.insertAdjacentElement("beforebegin",e);var t=f;n.form=t("form",{className:[c+"body"].join(" ")});var o=t("div",{className:c+"header"});t("button",{className:c+"close"},o);if(n.bbConsentBanner.title!==""){t("h3",{className:c+"-heading",innerText:n.bbConsentBanner.title},o)}n.form.appendChild(o);var r=t("div",{className:[c+"content",!n.isBottomLayout?"bb-type-scroll":"bb-type-dynamic",n.bbConsentBanner.showCategories?"is-categories":undefined].join(" ")});if(n.bbConsentBanner.description!==""){t("p",{className:c+"-text",innerHTML:n.bbConsentBanner.description},r)}if(i(n.bbConsentBanner.categories)==="object"&&n.bbConsentBanner.categories.length>0){var a;var l=t("div",{className:[c+"categories",n.bbConsentBanner.showCategories?undefined:"hidden"].join(" ")});(a=n.bbConsentBanner.categories)===null||a===void 0?void 0:a.forEach((function(e){var o;var r=t("div",{className:[c+"category-modules","hidden"].join(" ")});var a=(o=n.bbConsentBanner.modules)===null||o===void 0?void 0:o.filter((function(n){return n.category.uid===e.uid}));a===null||a===void 0?void 0:a.forEach((function(n){r.appendChild(m(false,n.name,n.uid,n.description,{"data-category":n.category.uid,checked:!!e.lockedAndActive,disabled:!!e.lockedAndActive}))}));l.appendChild(m(true,e.name,s+e.uid,e.description,{checked:!!e.lockedAndActive,disabled:!!e.lockedAndActive},i(a)==="object"&&r.children.length>0?r:null))}));r.appendChild(l)}n.form.appendChild(r);var u=t("div",{className:c+"footer"});var d=t("div",{className:[c+"buttons",n.bbConsentBanner.showCategories?"is-categories":"not-categories"].join(" ")});var b=n.bbConsentBanner.buttonsDisplayNames;n.acceptButton=t("button",{className:["bb-button","bb-btn--typeP"].join(" "),type:"submit",title:b.acceptAll,innerText:b.acceptAll},d);n.saveButton=t("button",{className:["bb-button","bb-btn--typeP","hidden"].join(" "),type:"submit",title:b.saveAndClose,innerText:b.saveAndClose},d);if(!n.isBottomLayout)n.moreButton=t("button",{className:["bb-button","bb-btn--typeS"].join(" "),type:"button",title:b.advancedSettings,innerText:b.advancedSettings},d);if(n.isBottomLayout&&n.bbConsentBanner.showCategories)n.confirmButton=t("button",{className:["bb-button","bb-btn--typeS"].join(" "),type:"submit",title:b.confirmSelection,innerText:b.confirmSelection},d);if(!n.bbConsentBanner.showCategories)n.rejectButton=t("button",{className:["bb-button","bb-btn--typeP"].join(" "),type:"button",title:b.reject,innerText:b.reject},d);u.appendChild(d);var v=t("div",{className:c+"links"});if(n.isBottomLayout){n.moreButton=t("a",{className:[c+"-link"].join(" "),href:"javascript:void(0);",title:b.advancedSettings,innerText:b.advancedSettings},v)}t("a",{className:c+"-link",title:n.bbConsentBanner.privacyPage.label,innerText:n.bbConsentBanner.privacyPage.label,href:n.bbConsentBanner.privacyPage.uri,target:n.bbConsentBanner.privacyPage.target},v);u.appendChild(v);n.form.appendChild(u);n.attachBannerEventListeners();document.querySelector(".bb-consentbanner").appendChild(n.form);document.querySelector(".bb-consentbanner").classList.add("visible")}}var d=false;function b(e){var n=this;var t=new u(e);t.init();if(d)return;d=true;document.querySelectorAll("[data-cookiebanner-module]").forEach((function(e){e.querySelector("input").addEventListener("click",(function(){document.querySelectorAll('[data-cookiebanner-module="'.concat(e.dataset.cookiebannerModule,'"] input')).forEach((function(e){return e.checked=true}));var t=JSON.parse(a.get(l));t[e.dataset.cookiebannerModule]=true;a.set(l,JSON.stringify(t)+";secure;samesite=strict",n.confirmDuration);setTimeout((function(){return window.location.reload()}),100)}))}))}function f(e,n,t){var o=document.createElement(e);for(var r in n){if(!n.hasOwnProperty(r))continue;if(r==="innerText")o.innerText=n[r];else if(r==="innerHTML")o.innerHTML=n[r];else{if(r in o)o[r]=n[r];else o.setAttribute(r==="className"?"class":r,n[r])}}if(t)t.appendChild(o);return o}function m(e,t,o,r,i,a){var s,l,u,d,b,m;e=(s=e)!==null&&s!==void 0?s:false;t=(l=t)!==null&&l!==void 0?l:"";o=(u=o)!==null&&u!==void 0?u:"";r=(d=r)!==null&&d!==void 0?d:"";i=(b=i)!==null&&b!==void 0?b:{};a=(m=a)!==null&&m!==void 0?m:false;var v=f;var p=v("div",{className:[c+(e?"category":"module")].join(" ")});var y=v("label",{className:"bb-control-checkbox","aria-label":t});y.appendChild(v("span",{className:["bb-control-label",e?"bb-label-category":"bb-label-module"].join(" "),innerText:t}));y.appendChild(v("input",n(n({},i),{},{type:"checkbox",name:o})));y.appendChild(v("span",{className:"bb-toggle"}));p.appendChild(y);if(r)p.appendChild(v("p",{className:c+"description",innerText:r}));if(a)p.appendChild(a);return p}}();return o}()}));