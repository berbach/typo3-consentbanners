(function e(t,n){if(typeof exports==="object"&&typeof module==="object")module.exports=n();else if(typeof define==="function"&&define.amd)define([],n);else if(typeof exports==="object")exports["BbModule"]=n();else t["BbModule"]=t["BbModule"]||{},t["BbModule"]["ConsentBanner"]=n()})(self,(function(){return function(){var e={"./Resources/Public/Assets/Src/JavaScript/Lib/cookie.js":function(e){let t={};t.exdays=30;t.check=function(e){let t=this.get(e);return t!==""};t.set=function(e,t,n){n=n?n:this.exdays;let o=new Date;o.setTime(o.getTime()+n*24*60*60*1e3);let s="expires="+o.toGMTString();document.cookie=e+"="+t+";"+s+";path=/"};t.get=function(e){let t=e+"=",n=decodeURIComponent(document.cookie),o=n.split(";");for(let e=0;e<o.length;e++){let n=o[e];while(n.charAt(0)===" "){n=n.substring(1)}if(n.indexOf(t)===0){return n.substring(t.length,n.length)}}return"{}"};e.exports=t}};var t={};function n(o){var s=t[o];if(s!==undefined){return s.exports}var i=t[o]={exports:{}};e[o](i,i.exports,n);return i.exports}!function(){n.d=function(e,t){for(var o in t){if(n.o(t,o)&&!n.o(e,o)){Object.defineProperty(e,o,{enumerable:true,get:t[o]})}}}}();!function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}();!function(){n.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}}();var o={};!function(){"use strict";n.r(o);n.d(o,{init:function(){return c}});const e=n("./Resources/Public/Assets/Src/JavaScript/Lib/cookie.js");const t="bb-consentbanner-";const s="bb-consentbanner-";if(!("from"in Array))Array.from=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n]);return t};if(!("includes"in Array.prototype))Array.prototype.includes=function(e,t){return this.indexOf(e,t)!==-1};if(!("fromEntries"in Object))Object.fromEntries=function(e){const t={};Array.from(e).forEach((e=>{t[e[0]]=e[1]}));return t};bbConsentBanner=bbConsentBanner||null;let i="";function r(n){const o=(e,t,n)=>typeof e===t&&e!==n;this.bbConsentBanner=o(bbConsentBanner,"object","")?bbConsentBanner:null;this.cookieName=o(this.bbConsentBanner.cName,"string","")?bbConsentBanner.cName:"BbConsentPreference";i=this.cookieName;this.confirmDuration=o(this.bbConsentBanner.confirmDuration,"number",0)?this.bbConsentBanner.confirmDuration:20;this.categories=typeof bbConsentBanner.categories==="object"&&bbConsentBanner.categories.length!==0?bbConsentBanner.categories:null;this.modules=typeof bbConsentBanner.modules==="object"&&bbConsentBanner.modules.length!==0?bbConsentBanner.modules:null;this.form=null;this.acceptButton=null;this.saveButton=null;this.moreButton=null;this.confirmButton=null;this.rejectButton=null;if(n.classList.contains("bb-widget")){this.widget=n;n=l("div",{className:["bb-consentbanner",`${this.bbConsentBanner.layoutType}`].join(" ")})}else this.widget=l("div",{className:["bb-widget",t+"button"].join(" ")});this.preferences=JSON.parse(e.get(this.cookieName));this.isBottomLayout=n.classList.contains("bb-cb-bottom");this.init=()=>{if(this.bbConsentBanner===null||this.categories===null||this.modules===null){let e="";if(this.bbConsentBanner===null)e+="Consent banner, ";if(this.categories===null)e+="Categories ";if(this.modules===null)e+="and Modules ";e+="data empty, Consent Banner not initialised!";console.warn(e);return false}this.widget.addEventListener("click",(()=>{if(this.form===null)this.generateBanner();else this.form.parentElement.classList.add("visible");this.moreButton.click();Object.keys(this.preferences).forEach((e=>{const n=this.form.querySelector(`.${t}module input[name="${e}"]`);if(this.preferences[e]!==n.checked)n.click()}))}));if(Object.keys(this.preferences).length===0)this.generateBanner();else n.insertAdjacentElement("afterend",this.widget)};this.attachBannerEventListeners=()=>{this.form?.addEventListener("submit",(e=>{e.preventDefault()}));this.saveButton?.addEventListener("click",(()=>r(o())));this.confirmButton?.addEventListener("click",(()=>r(o())));this.acceptButton?.addEventListener("click",(()=>r(i(true))));this.rejectButton?.addEventListener("click",(()=>r(i(false))));this.moreButton?.addEventListener("click",(()=>{this.moreButton.remove();this.confirmButton?.remove();this.saveButton.classList.remove("hidden");n.classList.remove("bb-cb-bottom");n.classList.add("bb-cb-overlay");const e=e=>{e?.classList.remove("bb-btn--typeP");e?.classList.add("bb-btn--typeS")};e(this.acceptButton);e(this.rejectButton);this.form.querySelector(`.${t}content`).classList.remove("bb-type-dynamic");this.form.querySelector(`.${t}content`).classList.add("bb-type-scroll");Array.from(this.form.querySelectorAll(`.${t}category-modules.hidden`)).forEach((e=>{e.classList.remove("hidden")}));this.form.querySelector(`.${t}categories`).classList.remove("hidden");this.form.querySelector(`.${t}buttons`).classList.remove("not-categories");this.form.querySelector(`.${t}buttons`).classList.add("is-categories")}));this.form.querySelector(`.${t}close`)?.addEventListener("click",(()=>{if(Object.keys(this.preferences).length===0)r(i(false));else this.form.parentElement.classList.remove("visible")}));const o=()=>Object.fromEntries(Array.from(this.form.querySelectorAll(`.${t}module input:not(:disabled)`)).map((e=>[e.name,e.checked])));const i=e=>{const t=o();for(let n of Object.keys(t))t[n]=e;r(t);return t};const r=t=>{e.set(this.cookieName,JSON.stringify(t)+";secure;samesite=strict",this.confirmDuration);window.location.reload()};Array.from(this.form.querySelectorAll(`.${t}module input:not(:disabled)`)).forEach((e=>{e.addEventListener(document.documentMode===11?"change":"input",(()=>{const n=e.dataset.category;const o=Array.from(document.querySelectorAll(`.${t}module input`)).filter((e=>e.dataset.category===n)).map((e=>e.checked));const i=document.querySelector(`.${t}category input[name="${s+n}"]`);i.indeterminate=false;if(!o.includes(true))i.checked=false;else if(!o.includes(false))i.checked=true;else i.indeterminate=true}))}));Array.from(this.form.querySelectorAll(`.${t}category input[name^=${s}]:not(:disabled)`)).forEach((e=>{e.addEventListener(document.documentMode===11?"change":"input",(()=>{const n=e.name.replace(s,"");Array.from(document.querySelectorAll(`.${t}module input`)).filter((e=>e.dataset.category===n)).forEach((t=>t.checked=e.checked))}))}))};this.generateBanner=()=>{this.widget.insertAdjacentElement("beforebegin",n);const e=l;this.form=e("form",{className:[t+"body"].join(" ")});const o=e("div",{className:t+"header"});e("button",{className:t+"close"},o);if(this.bbConsentBanner.title!==""){e("h3",{className:t+"-heading",innerText:this.bbConsentBanner.title},o)}this.form.appendChild(o);const i=e("div",{className:[t+"content",!this.isBottomLayout?"bb-type-scroll":"bb-type-dynamic",this.bbConsentBanner.showCategories?"is-categories":undefined].join(" ")});if(this.bbConsentBanner.description!==""){e("p",{className:t+"-text",innerHTML:this.bbConsentBanner.description},i)}if(typeof this.bbConsentBanner.categories==="object"&&this.bbConsentBanner.categories.length>0){const n=e("div",{className:[t+"categories",this.bbConsentBanner.showCategories?undefined:"hidden"].join(" ")});this.bbConsentBanner.categories?.forEach((o=>{const i=e("div",{className:[t+"category-modules","hidden"].join(" ")});const r=this.bbConsentBanner.modules?.filter((e=>e.category.uid===o.uid));r?.forEach((e=>{i.appendChild(d(false,e.name,e.uid,e.description,{"data-category":e.category.uid,checked:!!o.lockedAndActive,disabled:!!o.lockedAndActive}))}));n.appendChild(d(true,o.name,s+o.uid,o.description,{checked:!!o.lockedAndActive,disabled:!!o.lockedAndActive},typeof r==="object"&&i.children.length>0?i:null))}));i.appendChild(n)}this.form.appendChild(i);const r=e("div",{className:t+"footer"});const a=e("div",{className:[t+"buttons",this.bbConsentBanner.showCategories?"is-categories":"not-categories"].join(" ")});const c=this.bbConsentBanner.buttonsDisplayNames;this.acceptButton=e("button",{className:["bb-button","bb-btn--typeP"].join(" "),type:"submit",title:c.acceptAll,innerText:c.acceptAll},a);this.saveButton=e("button",{className:["bb-button","bb-btn--typeP","hidden"].join(" "),type:"submit",title:c.saveAndClose,innerText:c.saveAndClose},a);if(!this.isBottomLayout)this.moreButton=e("button",{className:["bb-button","bb-btn--typeS"].join(" "),type:"button",title:c.advancedSettings,innerText:c.advancedSettings},a);if(this.isBottomLayout&&this.bbConsentBanner.showCategories)this.confirmButton=e("button",{className:["bb-button","bb-btn--typeS"].join(" "),type:"submit",title:c.confirmSelection,innerText:c.confirmSelection},a);if(!this.bbConsentBanner.showCategories)this.rejectButton=e("button",{className:["bb-button","bb-btn--typeP"].join(" "),type:"button",title:c.reject,innerText:c.reject},a);r.appendChild(a);const b=e("div",{className:t+"links"});if(this.isBottomLayout){this.moreButton=e("button",{className:[t+"-link"].join(" "),type:"button",title:c.advancedSettings,innerText:c.advancedSettings},b)}e("a",{className:t+"-link",title:this.bbConsentBanner.privacyPage.label,innerText:this.bbConsentBanner.privacyPage.label,href:this.bbConsentBanner.privacyPage.uri},b);r.appendChild(b);this.form.appendChild(r);this.attachBannerEventListeners();document.querySelector(".bb-consentbanner").appendChild(this.form);document.querySelector(".bb-consentbanner").classList.add("visible")}}let a=false;function c(t){let n=new r(t);n.init();if(a)return;a=true;document.querySelectorAll("[data-cookiebanner-module]").forEach((t=>{t.querySelector("input").addEventListener("click",(()=>{document.querySelectorAll(`[data-cookiebanner-module="${t.dataset.cookiebannerModule}"] input`).forEach((e=>e.checked=true));const n=JSON.parse(e.get(i));n[t.dataset.cookiebannerModule]=true;e.set(i,JSON.stringify(n)+";secure;samesite=strict",this.confirmDuration);setTimeout((()=>window.location.reload()),100)}))}))}function l(e,t,n){const o=document.createElement(e);for(const e in t){if(!t.hasOwnProperty(e))continue;if(e==="innerText")o.innerText=t[e];else if(e==="innerHTML")o.innerHTML=t[e];else{if(e in o)o[e]=t[e];else o.setAttribute(e==="className"?"class":e,t[e])}}if(n)n.appendChild(o);return o}function d(e,n,o,s,i,r){e=e??false;n=n??"";o=o??"";s=s??"";i=i??{};r=r??false;const a=l;const c=a("div",{className:[t+(e?"category":"module")].join(" ")});const d=a("label",{className:"bb-control-checkbox","aria-label":n});d.appendChild(a("span",{className:["bb-control-label",e?"bb-label-category":"bb-label-module"].join(" "),innerText:n}));d.appendChild(a("input",{...i,type:"checkbox",name:o}));d.appendChild(a("span",{className:"bb-toggle"}));c.appendChild(d);if(s)c.appendChild(a("p",{className:t+"description",innerText:s}));if(r)c.appendChild(r);return c}}();return o}()}));